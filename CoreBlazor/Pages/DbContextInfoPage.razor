@page "/DbContext/{DbContext}/Info"
@using CoreBlazor.Components
@using CoreBlazor.Configuration
@using Microsoft.AspNetCore.Components.Authorization
@inject IEnumerable<DiscoveredContext> DiscoveredContexts
<AuthorizeView Policy="@($"{DbContext}/{Identifiers.Info}")">
    <Authorized>
        <DynamicComponent Type="@ComponentType" />
    </Authorized>
    <NotAuthorized>
        <h3>You are not authorized to view this page.</h3>
    </NotAuthorized>
</AuthorizeView>

@code {
    [Parameter]
    public string DbContext { get; set; }
    public Type ComponentType { get; set; }

    protected override void OnParametersSet()
    {
        var contextType = DiscoveredContexts.First(x => x.ContextType.Name == DbContext).ContextType;
        ComponentType = typeof(DbContextInfoComponent<>).MakeGenericType(contextType);
    }

}